(function(){var t,e,n,r,o;n=/^-?[Â£$Â¤]?[\d,.]+%?$/,o=/^\s+|\s+$/g,e=["click"],"ontouchstart"in document.documentElement&&e.push("touchstart"),t=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},(r={init:function(t){var e,n,o,a,i;for(null==t&&(t={}),null==t.selector&&(t.selector="table[data-sortable]"),i=[],o=0,a=(n=document.querySelectorAll(t.selector)).length;o<a;o++)e=n[o],i.push(r.initTable(e));return i},initTable:function(t){var e,n,o,a,i,u;if(1===(null!=(u=t.tHead)?u.rows.length:void 0)&&"true"!==t.getAttribute("data-sortable-initialized")){for(t.setAttribute("data-sortable-initialized","true"),e=a=0,i=(o=t.querySelectorAll("th")).length;a<i;e=++a)"false"!==(n=o[e]).getAttribute("data-sortable")&&r.setupClickableTH(t,n,e);return t}},setupClickableTH:function(n,o,a){var i,u,l,s,c,d;for(l=r.getColumnType(n,a),u=function(t){var e,i,u,s,c,d,f,p,h,g,b,m,v,y,A,T,w,C,S,E,x,D,j,q;if(!0===t.handled)return!1;for(t.handled=!0,f="true"===this.getAttribute("data-sorted"),p=this.getAttribute("data-sorted-direction"),u=f?"ascending"===p?"descending":"ascending":l.defaultSortDirection,v=0,w=(g=this.parentNode.querySelectorAll("th")).length;v<w;v++)(o=g[v]).setAttribute("data-sorted","false"),o.removeAttribute("data-sorted-direction");if(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",u),h=n.tBodies[0],d=[],f){for(T=0,E=(q=h.rows).length;T<E;T++)i=q[T],d.push(i);for(d.reverse(),D=0,x=d.length;D<x;D++)c=d[D],h.appendChild(c)}else{for(m=null!=l.compare?l.compare:function(t,e){return e-t},e=function(t,e){return t[0]===e[0]?t[2]-e[2]:l.reverse?m(e[0],t[0]):m(t[0],e[0])},s=y=0,C=(j=h.rows).length;y<C;s=++y)c=j[s],b=r.getNodeValue(c.cells[a]),null!=l.comparator&&(b=l.comparator(b)),d.push([b,c,s]);for(d.sort(e),A=0,S=d.length;A<S;A++)c=d[A],h.appendChild(c[1])}return"function"==typeof window.CustomEvent&&"function"==typeof n.dispatchEvent?n.dispatchEvent(new CustomEvent("Sortable.sorted",{bubbles:!0})):void 0},d=[],s=0,c=e.length;s<c;s++)i=e[s],d.push(t(o,i,u));return d},getColumnType:function(t,e){var n,o,a,i,u,l,s,c,d,f,p;if(null!=(o=null!=(d=t.querySelectorAll("th")[e])?d.getAttribute("data-sortable-type"):void 0))return r.typesObject[o];for(u=0,s=(f=t.tBodies[0].rows).length;u<s;u++)for(n=f[u],a=r.getNodeValue(n.cells[e]),l=0,c=(p=r.types).length;l<c;l++)if((i=p[l]).match(a))return i;return r.typesObject.alpha},getNodeValue:function(t){var e;return t?null!==(e=t.getAttribute("data-value"))?e:void 0!==t.innerText?t.innerText.replace(o,""):t.textContent.replace(o,""):""},setupTypes:function(t){var e,n,o,a;for(r.types=t,r.typesObject={},a=[],n=0,o=t.length;n<o;n++)e=t[n],a.push(r.typesObject[e.name]=e);return a}}).setupTypes([{name:"numeric",defaultSortDirection:"descending",match:function(t){return t.match(n)},comparator:function(t){return parseFloat(t.replace(/[^0-9.-]/g,""),10)||0}},{name:"date",defaultSortDirection:"ascending",reverse:!0,match:function(t){return!1},comparator:function(t){var e=t.split("/");return new Date(e[2],e[0]-1,e[1])||0}},{name:"alpha",defaultSortDirection:"ascending",match:function(){return!0},compare:function(t,e){return t.localeCompare(e)}}]),setTimeout(r.init,0),"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof exports?module.exports=r:window.Sortable=r}).call(this);
function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var _this=this;!function(){function e(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-sorted"),e[t].removeAttribute("data-sorted-direction")}function t(e,t,n){return n?'<td class="i"><span class="'+e+'"></span>'+t+"</td>":'<td class="'+e+'">'+t+"</td>"}function n(e){var n="",r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;n+="<tr>",n+=t("last",u.last,!1),n+=t("first",u.first,!1),"None"===u.m?n+=t("none",u.m,!1):n+=t("m",u.m,!1),n+=t(u.pet.toLowerCase(),u.pet,!0),n+=t("birthday",u.birthday,!1),n+=t("color",u.color,!1),n+="</tr>"}}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}var r=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then(function(e){if(e.ok){var t=e.headers.get("Content-Type");return t&&t.includes("application/json")?e.json():Promise.reject("Unexpected Content-Type")}return Promise.reject("Response not 200 - 299")}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=document.getElementById("fileSelect"),a=document.getElementById("fileInput"),i=document.getElementById("browse"),c=document.getElementById("people"),u=document.getElementById("people-body"),s=document.getElementsByTagName("th"),l=document.getElementById("peopleCount");o.addEventListener("click",function(e){o&&a.click()}),i.addEventListener("click",function(e){a&&a.click()}),a.addEventListener("change",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(i){var d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.preventDefault(),(d=new FormData).append("csv",a.files[0]),f=new Request("/upload",{method:"POST",body:d}),o.innerHTML=a.files[0].name,a.value="",c.setAttribute("data-sortable-initialized",!1),e(s),r(f).then(function(e){var t=n(e);u.insertAdjacentHTML("beforeend",t),Sortable.init();var r=c.getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;l.innerHTML=r}).catch(function(e){console.log(e)});case 9:case"end":return t.stop()}},t,_this)}));return function(e){return t.apply(this,arguments)}}())}();